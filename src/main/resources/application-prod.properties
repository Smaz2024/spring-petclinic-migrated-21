# ===================================================================
# PRODUCTION ENVIRONMENT CONFIGURATION
# Spring Petclinic â€“ PostgreSQL + WildFly (Production)
# ===================================================================

# -------------------------------------------------------------------
# DATABASE CONFIGURATION (PostgreSQL - Production)
# -------------------------------------------------------------------
jdbc.driverClassName=org.postgresql.Driver
jdbc.url=jdbc:postgresql://prod-db-primary:5432/petclinic_prod
jdbc.username=petclinic_prod_user
jdbc.password=${DB_PASSWORD}


# -------------------------------------------------------------------
# JNDI CONFIGURATION (Recommended for Production WildFly)
# -------------------------------------------------------------------
# jdbc.jndi-name=java:jboss/datasources/PetclinicProdDS


# -------------------------------------------------------------------
# HIKARICP CONNECTION POOL (Production - Optimized pool)
# -------------------------------------------------------------------
hikari.maximum-pool-size=30
hikari.minimum-idle=10
hikari.idle-timeout=600000
hikari.connection-timeout=30000
hikari.max-lifetime=1800000
hikari.auto-commit=false
hikari.cache-prep-stmts=true
hikari.prep-stmt-cache-size=250
hikari.prep-stmt-cache-sql-limit=2048


# -------------------------------------------------------------------
# JPA / HIBERNATE CONFIGURATION (Production - Minimal logging)
# -------------------------------------------------------------------
jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
jpa.show-sql=false
jpa.format-sql=false
jpa.hibernate.ddl-auto=validate


# -------------------------------------------------------------------
# HIBERNATE SECOND-LEVEL CACHE (ENABLED)
# -------------------------------------------------------------------
hibernate.cache.use_second_level_cache=true
hibernate.cache.use_query_cache=false
hibernate.cache.region.factory_class=org.hibernate.cache.jcache.JCacheRegionFactory
hibernate.cache.jcache.provider=com.github.benmanes.caffeine.jcache.spi.CaffeineCachingProvider
hibernate.cache.jcache.uri=classpath:caffeine-jcache.properties


# -------------------------------------------------------------------
# SPRING CACHE (Application-level caching)
# -------------------------------------------------------------------
spring.cache.type=jcache
spring.cache.cache-names=vets,specialties,petTypes


# -------------------------------------------------------------------
# CACHE CONFIGURATION (Caffeine - Production optimized)
# -------------------------------------------------------------------
cache.names=vets,specialties,petTypes
cache.initial-capacity=200
cache.maximum-size=1000
cache.expire-after-write-minutes=15


# -------------------------------------------------------------------
# VIEW RESOLVER & STATIC RESOURCE CONFIG
# -------------------------------------------------------------------
view.prefix=/WEB-INF/jsp/
view.suffix=.jsp
static.cache-period-seconds=31556926


# -------------------------------------------------------------------
# LOGGING (Production - Minimal, errors only)
# -------------------------------------------------------------------
logging.level.root=WARN
logging.level.org.springframework=WARN
logging.level.org.springframework.samples.petclinic=INFO
logging.level.org.hibernate.SQL=WARN
logging.level.org.hibernate.cache=WARN


# -------------------------------------------------------------------
# OBSERVABILITY (Production)
# -------------------------------------------------------------------
metrics.prometheus.enabled=true
otel.traces.sampler.type=traceidratio
otel.traces.sampler.arg=0.1
otel.exporter.otlp.endpoint=http://prod-otel-collector:4317
otel.exporter.otlp.protocol=grpc


# -------------------------------------------------------------------
# CUSTOM BUSINESS SETTINGS
# -------------------------------------------------------------------
petclinic.owner.pagesize=10


# -------------------------------------------------------------------
# ENVIRONMENT IDENTIFIER
# -------------------------------------------------------------------
environment.name=PRODUCTION
environment.color=red
