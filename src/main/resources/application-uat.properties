# ===================================================================
# USER ACCEPTANCE TEST (UAT) ENVIRONMENT CONFIGURATION
# Spring Petclinic – PostgreSQL + WildFly (UAT)
# ===================================================================

# -------------------------------------------------------------------
# DATABASE CONFIGURATION (PostgreSQL - UAT)
# -------------------------------------------------------------------
jdbc.driverClassName=org.postgresql.Driver
jdbc.url=jdbc:postgresql://uat-db-server:5432/petclinic_uat
jdbc.username=petclinic_uat_user
jdbc.password=${DB_PASSWORD:changeme}


# -------------------------------------------------------------------
# JNDI CONFIGURATION (OPTIONAL – preferred in full WildFly setups)
# -------------------------------------------------------------------
# jdbc.jndi-name=java:jboss/datasources/PetclinicUatDS


# -------------------------------------------------------------------
# HIKARICP CONNECTION POOL (UAT - Production-like pool)
# -------------------------------------------------------------------
hikari.maximum-pool-size=20
hikari.minimum-idle=5
hikari.idle-timeout=600000
hikari.connection-timeout=30000
hikari.max-lifetime=1800000
hikari.auto-commit=false
hikari.cache-prep-stmts=true
hikari.prep-stmt-cache-size=250
hikari.prep-stmt-cache-sql-limit=2048


# -------------------------------------------------------------------
# JPA / HIBERNATE CONFIGURATION (UAT - Production-like)
# -------------------------------------------------------------------
jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
jpa.show-sql=false
jpa.format-sql=false
jpa.hibernate.ddl-auto=validate


# -------------------------------------------------------------------
# HIBERNATE SECOND-LEVEL CACHE (ENABLED)
# -------------------------------------------------------------------
hibernate.cache.use_second_level_cache=true
hibernate.cache.use_query_cache=false
hibernate.cache.region.factory_class=org.hibernate.cache.jcache.JCacheRegionFactory
hibernate.cache.jcache.provider=com.github.benmanes.caffeine.jcache.spi.CaffeineCachingProvider
hibernate.cache.jcache.uri=classpath:caffeine-jcache.properties


# -------------------------------------------------------------------
# SPRING CACHE (Application-level caching)
# -------------------------------------------------------------------
spring.cache.type=jcache
spring.cache.cache-names=vets,specialties,petTypes


# -------------------------------------------------------------------
# CACHE CONFIGURATION (Caffeine)
# -------------------------------------------------------------------
cache.names=vets,specialties,petTypes
cache.initial-capacity=100
cache.maximum-size=500
cache.expire-after-write-minutes=10


# -------------------------------------------------------------------
# VIEW RESOLVER & STATIC RESOURCE CONFIG
# -------------------------------------------------------------------
view.prefix=/WEB-INF/jsp/
view.suffix=.jsp
static.cache-period-seconds=86400


# -------------------------------------------------------------------
# LOGGING (UAT - Production-like, minimal logging)
# -------------------------------------------------------------------
logging.level.root=INFO
logging.level.org.springframework=INFO
logging.level.org.springframework.samples.petclinic=INFO
logging.level.org.hibernate.SQL=WARN
logging.level.org.hibernate.cache=INFO


# -------------------------------------------------------------------
# OBSERVABILITY (UAT)
# -------------------------------------------------------------------
metrics.prometheus.enabled=true
otel.traces.sampler.type=traceidratio
otel.traces.sampler.arg=0.2
otel.exporter.otlp.endpoint=http://uat-otel-collector:4317
otel.exporter.otlp.protocol=grpc


# -------------------------------------------------------------------
# CUSTOM BUSINESS SETTINGS
# -------------------------------------------------------------------
petclinic.owner.pagesize=5


# -------------------------------------------------------------------
# ENVIRONMENT IDENTIFIER
# -------------------------------------------------------------------
environment.name=UAT
environment.color=yellow
